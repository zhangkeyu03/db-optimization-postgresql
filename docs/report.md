
# SQL Optimization Project ‚Äî F_WORKS_LIST (PostgreSQL)

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫—É—Ä—Å–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –¶–µ–ª—å—é —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤ `f_works_list` –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ —Å—Ä–µ–¥–µ PostgreSQL.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `sql/1_create_tables.sql`: –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- `sql/2_insert_test_data.sql`: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ generate_series –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- `sql/3_create_indexes.sql`: –ò–Ω–¥–µ–∫—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
- `sql/4_function_or_view.sql`: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤
- `sql/5_queries.sql`: —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ EXPLAIN
- `docs/report.md`: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –ø–æ –∞–Ω–∞–ª–∏–∑—É

---

## üìÑ –°–≤–æ–¥–∫–∞ –æ—Ç—á–µ—Ç–∞ –ø–æ –∞–Ω–∞–ª–∏–∑—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏
–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `f_works_list` –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ 3000 –∑–∞–∫–∞–∑–æ–≤ –∏ –∏—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–æ–∫—Ä–∞—Ç–∏–≤ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ 1-2 —Å–µ–∫—É–Ω–¥.

### –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
- `works`: 50 000 –∑–∞–∫–∞–∑–æ–≤
- `workitem`: 150 000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `analiz`: 100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
- `—Å–æ—Ç—Ä—É–¥–Ω–∏–∫`: 50 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞
- –í—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞: **106 –º—Å**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—ç—à-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ + –ø–∏—Ä–∞–º–∏–¥–∞–ª—å–Ω—É—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É Top-N
- –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞, –ø–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã

### –ú–µ—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å:
```sql
–°–û–ó–î–ê–¢–¨ –ò–ù–î–ï–ö–° idx_works_date_created –í–ö–õ works(date_created);
–°–û–ó–î–ê–¢–¨ –ò–ù–î–ï–ö–° idx_workitem_workid –ù–ê workitem(work_id);
–°–û–ó–î–ê–¢–¨ –ò–ù–î–ï–ö–° idx_workitem_analizid –ù–ê workitem(analiz_id);
–°–û–ó–î–ê–¢–¨ –ò–ù–î–ï–ö–° idx_workitem_employeeid –ù–ê workitem(employee_id);
```

### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –í—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞: **8,6 –º—Å**
- PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ü–∏–∫–ª + Memoize + —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É–ª—É—á—à–µ–Ω–∏—è: >12x

## üìà –°–≤–æ–¥–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –§–∞–∑–∞ | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | –ú–µ—Ç–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ |
|----------------|----------|---------------------|
| –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è | 106–º—Å | –ù–µ—Ç –∏–Ω–¥–µ–∫—Å–∞, —Ö—ç—à-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ |
| –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ | 8,6 –º—Å | –ü–æ–ª–Ω—ã–π –∏–Ω–¥–µ–∫—Å + –í–ª–æ–∂–µ–Ω–Ω—ã–π —Ü–∏–∫–ª |
| –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | ‚âà12,3x | –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—Ä–æ—Å–∞ >90% |

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ LLM
```
–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ PostgreSQL, –≤—ã–±—Ä–∞–≤ 3000 –ª—É—á—à–∏—Ö –∑–∞–∫–∞–∑–æ–≤ —Å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º –∫ workitem, analiz –∏ employee.
–ò–∑–±–µ–≥–∞–π—Ç–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –æ–±–µ—Å–ø–µ—á—å—Ç–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è <1 —Å –¥–ª—è 150 000 –∑–∞–ø–∏—Å–µ–π.
```

---

## üìå –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –±—ã–ª –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å—Ä–µ–¥–µ PostgreSQL –∏ –≤—ã–ø–æ–ª–Ω–∏–ª –∑–∞–¥–∞—á—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã, –¥–æ—Å—Ç–∏–≥–Ω—É–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—è—â–µ–π —Ç—Ä–µ–±—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (8 –º—Å –ø—Ä–æ—Ç–∏–≤ 2 —Å–µ–∫—É–Ω–¥).
